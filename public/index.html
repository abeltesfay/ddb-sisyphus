<!DOCTYPE html>
<html>
    <head>
        <title>DynamoDB Table Designer</title>
        <link rel="shortcut icon" href="#">
        <link href="index.css" rel="stylesheet">
        <script type="text/javascript" src="appstate.js"></script>
        <script type="text/javascript" src="constants.js"></script>
        <script type="text/javascript" src="util.js"></script>
        <script type="text/javascript" src="ux.js"></script>
        <script type="text/javascript" src="ux-keys.js"></script>
        <script type="text/javascript" src="editorStructure.js"></script>
        <script type="text/javascript" src="editorQueries.js"></script>
        <script type="text/javascript">
            let APP_STATE = getDefaultAppState();
            let APP_STATE_SAVED = undefined;
            
            // let selectedFacet = "Review", selectedField = "GSI1-PK", selectedKey;
            let selectedFacet, selectedField, selectedKey, selectedQuery, selectedIndex;

            // let currentEditor = CONSTS.EDITORS.TABLESTRUCT;
            let currentEditor = CONSTS.EDITORS.QUERIES;
        </script>
    </head>
    <body onkeydown="processKeys(event);" onload="preparePage();">
        <div class="action-bar">
            <fieldset>
                <legend>View</legend>
                <button id="showTableStructureEditor">Structure</button>
                <button id="showQueryEditor">Queries</button>
            </fieldset>
            <fieldset>
                <legend>Application State</legend>
                <button id="saveState">Save</button>
                <button id="loadFromOrbit">Load</button>
                <button id="nukeFromOrbit">Nuke State</button>
                <button id="logState">Log State</button>
            </fieldset>
            <div class="hidden unsaved-container" id="unsaved">
                <label>Unsaved data</label>
            </div>
        </div>
        <div class="tableStructureEditor editView hidden">
            <div class="facets">
                <h2>Facets</h2>
                <button id="addFacet" value="Add">Add</button>
                <button disabled id="editFacetName" value="Edit">Edit</button>
                <button disabled id="deleteFacet" value="Edit">Delete</button>
                <ol id="facetList"></ol>
            </div>
            <div class="fields">
                <h2>Fields</h2>
                <button id="addField" value="Add">Add</button>
                <button disabled id="editFieldName" value="Edit">Edit</button>
                <button disabled id="deleteField" value="Delete">Delete</button>
                <ol id="fieldList"></ol>
            </div>
            <div class="composite hidden" id="compositeEditor">
                <h2>Composite Key</h2>
                <button id="addKey" value="Add">Add</button>
                <button id="removeKey" value="remove">Remove</button>
                <button id="moveKeyUp" value="up">Up</button>
                <button id="moveKeyDown" value="down">Down</button>
                <br/>
                <select class="compositeKeys" id="compositeKeys" multiple>

                </select>
                <select class="compositeKeyOptions" id="compositeKeyOptions"></select>
                <br/>
                <br/>
            </div>
        </div>
        <div class="queryEditor editView hidden">
            <div class="queries">
                <h2>Queries</h2>
                <div class="queryList">
                    <button id="addQuery" value="Add">Add</button>
                    <button disabled id="editQueryName" value="Edit">Edit</button>
                    <button disabled id="deleteQuery" value="Edit">Delete</button>
                    <ol id="queryList"></ol>
                </div>
                <div class="queryDetails">
                    <input readonly id="queryName" placeholder="Query Id" />
                    <input id="queryDescription" placeholder="Description" />
                    <select id="queryIndex" placeholder="Index"></select>
                </div>
            </div>
            <div class="indices">
                <h2>Indices</h2>
                <div class="indexList">
                    <button id="addIndex" value="Add">Add</button>
                    <button disabled id="editIndexName" value="Edit">Edit</button>
                    <button disabled id="deleteIndex" value="Delete">Delete</button>
                    <button disabled id="saveIndex" value="Save">Save</button>
                    <ol id="indexList"></ol>
                </div>
                <div class="indexDetails">
                    <input readonly id="indexName" placeholder="Query Id" />
                    <input id="indexDescription" placeholder="Description" />
                    <select id="indexPk" title="partition key"></select>
                    <select id="indexSk" title="sort key"></select>
                </div>
            </div>
        </div>
    </body>
</html>